{% extends 'base.html' %}
{% block title %}Painel · App Motorista{% endblock %}
{% block content %}
<section class="hero">
  <p class="eyebrow">Painel</p>
  <h1>Gerenciar usuários</h1>
  <p class="lede">Crie novos logins para motoristas e ajudantes. Apenas admins têm acesso.</p>
</section>

<section class="card" style="margin-bottom: 24px;">
  <h2>Novo usuário</h2>
  <form method="post" class="form" style="max-width: 600px;">
    <div class="field">
      <label for="name">Nome completo</label>
      <input id="name" name="name" placeholder="Ex: João Silva" required>
    </div>
    <div class="field">
      <label for="email">Email</label>
      <input id="email" name="email" type="email" placeholder="joao@exemplo.com" autocomplete="email" required>
    </div>
    <div class="field two-col">
      <div class="field">
        <label for="cnh">CNH</label>
        <input id="cnh" name="cnh" placeholder="Ex: 12345678901" required>
      </div>
      <div class="field">
        <label for="phone">Telefone</label>
        <input id="phone" name="phone" type="tel" placeholder="Ex: (11) 98765-4321" required>
      </div>
    </div>
    <div class="field two-col">
      <div class="field">
        <label for="password">Senha</label>
        <input id="password" name="password" type="password" autocomplete="new-password" required>
        <p class="hint">Mínimo 6 caracteres.</p>
      </div>
      <div class="field">
        <label for="role">Papel</label>
        <select id="role" name="role">
          <option value="user">Motorista/Ajudante</option>
          <option value="admin">Admin</option>
        </select>
      </div>
    </div>
    <div class="actions">
      <button type="submit" class="primary">Criar usuário</button>
    </div>
  </form>
</section>

<section class="card">
  <h2>Usuários cadastrados</h2>
  {% if users %}
  <div class="users-list">
    {% for u in users %}
    <div class="user-card">
      <div class="user-card-header">
        <div>
          <div class="user-name">{{ u['name'] }}</div>
          <div class="user-email">{{ u['email'] or u['username'] }}</div>
        </div>
        <span class="pill pill-alt">{{ u['role'] }}</span>
      </div>
      <div class="user-card-details">
        <div class="user-detail-item">
          <span class="detail-label">ID</span>
          <span class="detail-value">{{ u['id'] }}</span>
        </div>
        <div class="user-detail-item">
          <span class="detail-label">CNH</span>
          <span class="detail-value">{{ u['cnh'] or '—' }}</span>
        </div>
        <div class="user-detail-item">
          <span class="detail-label">Telefone</span>
          <span class="detail-value">{{ u['phone'] or '—' }}</span>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <p class="muted">Nenhum usuário cadastrado além do admin.</p>
  {% endif %}
</section>
{% endblock %}
